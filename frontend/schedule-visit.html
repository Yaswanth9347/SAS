<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Schedule Visit - SAS Admin</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <!-- Consolidated CSS -->
    <link rel="stylesheet" href="css/style.css">
    
    <!-- Page-specific CSS -->
    <link rel="stylesheet" href="css/pages/schedule-visit.css">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <h2>Spread A Smile</h2>
            </div>
            <ul class="nav-menu" id="navMenu">
                <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
                <li><a href="visits.html" class="nav-link">Visits</a></li>
                <li><a href="teams.html" class="nav-link">Teams</a></li>
                <li><a href="visit-gallery.html" class="nav-link">Gallery</a></li>
        <li><a href="profile.html" class="nav-link">Profile</a></li>
                <!-- Admin-only navigation items will be added dynamically -->
                <li><span class="nav-link" id="navUser">Welcome, User</span></li>
                <li><a href="#" class="nav-link logout-btn" id="navLogout">Logout</a></li>
            </ul>
        </div>
    </nav>

    <section class="dashboard">
        <div class="container">
            <div class="dashboard-header">
                <h1>Schedule New Visit</h1>
                <p>Assign teams to schools for volunteer visits</p>
            </div>

            <div class="schedule-form-container">
                <h2>Schedule a Visit</h2>
                <form id="scheduleVisitForm" class="schedule-form">
                    <div class="form-row" style="display: flex; gap: 20px; margin-bottom: 10px;">
                        <div class="form-group" style="flex: 1;">
                            <label for="visitDate">Visit Date <span class="required">*</span></label>
                            <input type="date" id="visitDate" name="date" required min="{{today}}">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="team">Select Team <span class="required">*</span></label>
                            <select id="team" name="team" required>
                                <option value="">Loading teams...</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row" style="display: flex; gap: 20px; margin-bottom: 10px;">
                        <div class="form-group" style="flex: 1;">
                            <label for="school">Select School <span class="required">*</span></label>
                            <select id="school" name="school" required>
                                <option value="">Loading schools...</option>
                            </select>
                            <div id="schoolInfo" class="school-info" style="display: none;"></div>
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="assignedClass">Assigned Class <span class="required">*</span></label>
                            <input type="text" id="assignedClass" name="assignedClass" required placeholder="e.g., 6th Standard, Section A">
                        </div>
                    </div>

                    <div class="form-row" style="display: flex; gap: 20px; margin-bottom: 10px;">
                        <div class="form-group" style="flex: 1;">
                            <label for="expectedChildren">Expected Number of Children</label>
                            <input type="number" id="expectedChildren" name="childrenCount" min="1" max="100" value="30">
                        </div>
                        <div class="form-group" style="flex: 1;">
                            <label for="visitTime">Visit Time</label>
                            <input type="time" id="visitTime" name="visitTime" value="09:00">
                        </div>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" onclick="checkAvailability()"><i class="fas fa-calendar-check"></i> Check Availability</button>
                        <button type="submit" class="btn btn-primary"><i class="fas fa-calendar-plus"></i> Schedule Visit</button>
                    </div>
                </form>

                <div id="availabilityResult" class="availability-result" style="display: none;"></div>
            </div>

            <div class="upcoming-visits">
                <h2>Upcoming Scheduled Visits</h2>
                <div id="upcomingVisitsList" class="visits-list">
                    <div class="loading">Loading upcoming visits...</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Shared JavaScript Modules -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/api.js"></script>
    <script src="js/navbar.js"></script>
    <script src="js/notifications.js"></script>
    <script src="js/loading.js"></script>
    <script src="js/app.js"></script>

    <!-- Page-specific JavaScript -->
    <script src="js/pages/schedule-visit.js"></script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teams - Spread a Smile</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  
  <!-- Consolidated CSS -->
  <link rel="stylesheet" href="css/style.css">
  
  <!-- Page-specific CSS -->
  <link rel="stylesheet" href="css/pages/teams.css">
</head>
<body>
  <nav class="navbar">
    <div class="nav-container">
      <div class="nav-logo">
        <h2>Spread A Smile</h2>
      </div>
      <ul class="nav-menu" id="navMenu">
        <li><a href="dashboard.html" class="nav-link">Dashboard</a></li>
        <li><a href="visits.html" class="nav-link">Visits</a></li>
        <li><a href="teams.html" class="nav-link active">Teams</a></li>
        <li><a href="visit-gallery.html" class="nav-link">Gallery</a></li>
        <li><a href="profile.html" class="nav-link">Profile</a></li>
        <!-- Admin-only navigation items will be added dynamically -->
        <li><span class="nav-link" id="navUser">Welcome, User</span></li>
        <li><a href="#" class="nav-link logout-btn" id="navLogout">Logout</a></li>
      </ul>
    </div>
  </nav>

  <section class="dashboard">
    <div class="container">
      <div class="dashboard-header">
        <h1>Manage Teams</h1>
        <p>Create and manage volunteer teams</p>
      </div>

      <div class="team-creator">
        <h2>Create New Team</h2>
        <form id="teamForm">
          <div class="form-group">
            <label for="teamName">Team Name *</label>
            <input id="teamName" name="name" required placeholder="e.g., Team A" />
          </div>

          <div class="form-group">
            <label>Select Team Members</label>
            <div class="user-search">
              <i class="fa fa-search"></i>
              <input 
                type="text" 
                id="userSearchInput" 
                placeholder="Search users by name..." 
                autocomplete="off"
              />
            </div>
            <div id="usersList" class="users-list">Loading users...</div>
          </div>

          <div class="form-actions">
            <button type="submit" class="btn btn-primary">
              <i class="fa fa-plus-circle"></i>
              <span>Create Team</span>
            </button>
          </div>
        </form>
      </div>

      <div class="existing-teams">
        <h2>Existing Teams</h2>
        <div id="teamsList">Loading teams...</div>
      </div>
    </div>
  </section>

  <!-- Schedule Visit Modal -->
  <div id="scheduleVisitModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Schedule Visit</h2>
        <button class="close-modal" onclick="closeScheduleModal()">&times;</button>
      </div>
      <div class="modal-body">
        <div id="scheduleSuccessMessage" class="success-message">
          <i class="fa fa-check-circle"></i>
          <span>Visit scheduled successfully!</span>
        </div>
        
        <form id="scheduleVisitForm">
          <input type="hidden" id="selectedTeamId" />
          
          <div class="form-group">
            <label for="modalTeamName">Team</label>
            <input type="text" id="modalTeamName" readonly style="background: #f5f5f5; cursor: not-allowed;" />
          </div>

          <div class="form-group">
            <label for="visitSchool">Select School *</label>
            <select id="visitSchool" name="school" required>
              <option value="">Loading schools...</option>
            </select>
          </div>

          <div class="form-group">
            <label for="visitDate">Visit Date *</label>
            <input type="date" id="visitDate" name="date" required />
          </div>

          <div class="form-group">
            <label for="visitTime">Visit Time</label>
            <input type="time" id="visitTime" name="time" value="09:00" />
          </div>

          <div class="form-group">
            <label for="assignedClass">Assigned Class *</label>
            <input type="text" id="assignedClass" name="assignedClass" required placeholder="e.g., 6th Standard, Section A" />
          </div>

          <div class="form-group">
            <label for="childrenCount">Expected Number of Children</label>
            <input type="number" id="childrenCount" name="childrenCount" min="1" max="500" value="30" />
          </div>

          <div class="form-actions">
            <button type="button" class="btn btn-secondary" onclick="closeScheduleModal()" style="background: #e0e0e0; color: #333; border: 2px solid #bdbdbd;">
              <i class="fa fa-times"></i>
              <span>Cancel</span>
            </button>
            <button type="submit" class="btn btn-primary">
              <i class="fa fa-save"></i>
              <span>Save</span>
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Team Members Modal -->
  <div id="teamMembersModal" class="modal members-list-modal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="teamMembersTitle">Team Members</h2>
        <button class="close-modal" onclick="closeMembersModal()">&times;</button>
      </div>
      <div class="modal-body" id="teamMembersBody">
        <!-- Members list will be populated here -->
      </div>
    </div>
  </div>

  <!-- Shared JavaScript Modules - Load First -->
  <script src="js/config.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/api.js"></script>
  <script src="js/navbar.js"></script>
  <script src="js/notifications.js"></script>
  <script src="js/loading.js"></script>
  <script src="js/app.js"></script>
  
  <!-- Page-specific JavaScript -->
  <script src="js/pages/teams.js"></script>
</body>
</html>

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=development
PORT=5001

# ============================================
# CORS CONFIGURATION
# ============================================
# Comma-separated list of allowed origins for CORS
# In development, localhost is automatically allowed
# In production, list all domains that should access your API
ALLOWED_ORIGINS=http://localhost:5001,http://localhost:3000,https://yourdomain.com

# ============================================
# RATE LIMITING
# ============================================
# Maximum requests per IP per 15 minutes for general API endpoints
RATE_LIMIT_MAX=100

# Maximum authentication attempts per IP per 15 minutes (login, register)
AUTH_RATE_LIMIT_MAX=5

# Maximum password reset requests per IP per hour
PASSWORD_RESET_LIMIT_MAX=3

# ============================================
# DATABASE CONFIGURATION
# ============================================
# MongoDB Atlas Connection
# Get this from: https://cloud.mongodb.com

# Local Development (use your development cluster):
MONGODB_URI=mongodb+srv://your_username:your_password@cluster.mongodb.net/?retryWrites=true&w=majority

# Production (set in Render dashboard, NOT here):
# MONGODB_URI=mongodb+srv://spreadasmile22_db_user:DYRtTZl0bxwXQc74@sas.qs5tfqz.mongodb.net/sas_database?retryWrites=true&w=majority&appName=SAS

# Test MongoDB URI (used during testing)
MONGODB_URI_TEST=mongodb://localhost:27017/sas_test

# Optional: Database name override
DB_NAME=sas_database

# ============================================
# JWT CONFIGURATION
# ============================================
# Generate a secure secret: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRE=30d

# ============================================
# EMAIL CONFIGURATION (Required for password reset)
# ============================================
# Email Service (gmail, outlook, etc.)
EMAIL_SERVICE=gmail

# Email Credentials
# For Gmail: Use App Password (16 characters, generate at https://myaccount.google.com/apppasswords)
# IMPORTANT: Never use your regular Gmail password!

# Local Development:
EMAIL_USER=your.email@gmail.com
EMAIL_PASSWORD=your_gmail_app_password_16_chars

# Production (set in Render dashboard, NOT here):
# EMAIL_USER=spreadasmile22@gmail.com
# EMAIL_PASSWORD=<Generate Gmail App Password at https://myaccount.google.com/apppasswords>

# SMTP Configuration
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587

# Email Sender Information
FROM_NAME=Spread A Smile
FROM_EMAIL=your.email@gmail.com

# Frontend URL (for password reset links and CORS)
# Local: http://localhost:5001
# Production: https://your-app.onrender.com (set after first deploy)
FRONTEND_URL=http://localhost:5001

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
# Maximum file sizes (in bytes)
MAX_FILE_SIZE=10485760
MAX_PHOTO_SIZE=5242880
MAX_VIDEO_SIZE=52428800

# Upload directory
UPLOAD_DIR=uploads

# ============================================
# CORS CONFIGURATION
# ============================================
# Allowed origins (comma-separated for multiple)
ALLOWED_ORIGINS=http://localhost:5001,http://localhost:3000

# ============================================
# RATE LIMITING (Optional - for production)
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# SECURITY (Optional - for production)
# ============================================
# Session secret for cookies
SESSION_SECRET=your-session-secret-change-this

# ============================================
# ADMIN CONFIGURATION
# ============================================
# Default admin credentials (created on first run)
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@spreadasmile.org
ADMIN_PASSWORD=Admin@123
ADMIN_NAME=System Administrator

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info

# ============================================
# DEVELOPMENT TOOLS
# ============================================
# Enable debug mode for detailed logs
DEBUG=false

# ============================================
# PRODUCTION NOTES
# ============================================
# 1. Change all default passwords and secrets
# 2. Use environment-specific .env files (.env.production, .env.staging)
# 3. Never commit .env files to version control
# 4. Use strong, randomly generated secrets
# 5. Enable HTTPS in production
# 6. Configure proper email service (SendGrid, AWS SES, etc.)
# 7. Set up proper rate limiting and security headers
# 8. Configure database backups
# 9. Set up monitoring and logging services
# 10. Use proper CORS configuration for production domains

# ============================================
# RENDER DEPLOYMENT CREDENTIALS (REFERENCE)
# ============================================
# These credentials are set in Render Dashboard Environment Variables
# DO NOT add these to your local .env file!
#
# Production MongoDB Atlas:
#   Username: spreadasmile22_db_user
#   Password: DYRtTZl0bxwXQc74
#   Cluster: sas.qs5tfqz.mongodb.net
#   Database: sas_database
#   Full URI: mongodb+srv://spreadasmile22_db_user:DYRtTZl0bxwXQc74@sas.qs5tfqz.mongodb.net/sas_database?retryWrites=true&w=majority&appName=SAS
#
# Production Email (Gmail):
#   Email: spreadasmile22@gmail.com
#   Password: <Generate Gmail App Password - https://myaccount.google.com/apppasswords>
#
# Production Server:
#   PORT: 10000 (Render default)
#   NODE_ENV: production
#   JWT_SECRET: fU+Fy1A/maec1Y/PFIN3kYK2dSVFqCHDO5ykjSdQrjI= (or generate new)
#   FRONTEND_URL: https://your-app.onrender.com (set after first deploy)

# ============================================
# SECURITY CHECKLIST
# ============================================
# ✅ Helmet: Security headers enabled (CSP, HSTS, X-Frame-Options, etc.)
# ✅ Rate Limiting: 
#    - Global API: 100 requests per 15 minutes
#    - Auth endpoints: 5 attempts per 15 minutes
#    - Password reset: 3 requests per hour
# ✅ CORS: Configure ALLOWED_ORIGINS for production domains
# ✅ Upload Security:
#    - Path sanitization prevents directory traversal
#    - MIME type validation prevents malicious file uploads
#    - File size limits enforced (10MB photos, 100MB videos)
# ✅ Password Security:
#    - bcrypt hashing with salt rounds
#    - Minimum 6 characters with letter + number requirement
#    - Secure password reset tokens (SHA-256, 1-hour expiration)
# ⚠️  TODO for Production:
#    - Enable HTTPS/TLS
#    - Configure WAF (Web Application Firewall)
#    - Set up DDoS protection
#    - Implement malware scanning for uploads
#    - Enable audit logging
#    - Configure intrusion detection


# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=development
PORT=5001

# ============================================
# CORS CONFIGURATION
# ============================================
# Comma-separated list of allowed origins for CORS
# In development, localhost is automatically allowed
# In production, list all domains that should access your API
ALLOWED_ORIGINS=http://localhost:5001,http://localhost:3000,https://yourdomain.com

# ============================================
# RATE LIMITING
# ============================================
# Maximum requests per IP per 15 minutes for general API endpoints
RATE_LIMIT_MAX=100

# Maximum authentication attempts per IP per 15 minutes (login, register)
AUTH_RATE_LIMIT_MAX=5

# Maximum password reset requests per IP per hour
PASSWORD_RESET_LIMIT_MAX=3

# ============================================
# DATABASE CONFIGURATION
# ============================================
# Production MongoDB URI
MONGODB_URI=mongodb://localhost:27017/sas

# Test MongoDB URI (used during testing)
MONGODB_URI_TEST=mongodb://localhost:27017/sas_test

# ============================================
# JWT CONFIGURATION
# ============================================
# Generate a secure secret: openssl rand -base64 64
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_EXPIRE=30d

# ============================================
# EMAIL CONFIGURATION (Required for password reset)
# ============================================
# SMTP Server Configuration
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587

# Email Credentials
# For Gmail: Generate App Password at https://myaccount.google.com/apppasswords
EMAIL_USER=your-email@gmail.com
EMAIL_PASSWORD=your-16-character-app-password

# Email Sender Information
FROM_NAME=Spread A Smile
FROM_EMAIL=noreply@spreadasmile.org

# Frontend URL (for password reset links)
FRONTEND_URL=http://localhost:5001/frontend

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
# Maximum file sizes (in bytes)
MAX_FILE_SIZE=10485760
MAX_PHOTO_SIZE=5242880
MAX_VIDEO_SIZE=52428800

# Upload directory
UPLOAD_DIR=uploads

# ============================================
# CORS CONFIGURATION
# ============================================
# Allowed origins (comma-separated for multiple)
ALLOWED_ORIGINS=http://localhost:5001,http://localhost:3000

# ============================================
# RATE LIMITING (Optional - for production)
# ============================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ============================================
# SECURITY (Optional - for production)
# ============================================
# Session secret for cookies
SESSION_SECRET=your-session-secret-change-this

# ============================================
# ADMIN CONFIGURATION
# ============================================
# Default admin credentials (created on first run)
ADMIN_USERNAME=admin
ADMIN_EMAIL=admin@spreadasmile.org
ADMIN_PASSWORD=Admin@123
ADMIN_NAME=System Administrator

# ============================================
# LOGGING
# ============================================
LOG_LEVEL=info

# ============================================
# DEVELOPMENT TOOLS
# ============================================
# Enable debug mode for detailed logs
DEBUG=false

# ============================================
# PRODUCTION NOTES
# ============================================
# 1. Change all default passwords and secrets
# 2. Use environment-specific .env files (.env.production, .env.staging)
# 3. Never commit .env files to version control
# 4. Use strong, randomly generated secrets
# 5. Enable HTTPS in production
# 6. Configure proper email service (SendGrid, AWS SES, etc.)
# 7. Set up proper rate limiting and security headers
# 8. Configure database backups
# 9. Set up monitoring and logging services
# 10. Use proper CORS configuration for production domains

# ============================================
# SECURITY CHECKLIST
# ============================================
# ✅ Helmet: Security headers enabled (CSP, HSTS, X-Frame-Options, etc.)
# ✅ Rate Limiting: 
#    - Global API: 100 requests per 15 minutes
#    - Auth endpoints: 5 attempts per 15 minutes
#    - Password reset: 3 requests per hour
# ✅ CORS: Configure ALLOWED_ORIGINS for production domains
# ✅ Upload Security:
#    - Path sanitization prevents directory traversal
#    - MIME type validation prevents malicious file uploads
#    - File size limits enforced (10MB photos, 100MB videos)
# ✅ Password Security:
#    - bcrypt hashing with salt rounds
#    - Minimum 6 characters with letter + number requirement
#    - Secure password reset tokens (SHA-256, 1-hour expiration)
# ⚠️  TODO for Production:
#    - Enable HTTPS/TLS
#    - Configure WAF (Web Application Firewall)
#    - Set up DDoS protection
#    - Implement malware scanning for uploads
#    - Enable audit logging
#    - Configure intrusion detection

